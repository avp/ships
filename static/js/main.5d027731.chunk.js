(this.webpackJsonpships=this.webpackJsonpships||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),c=n(9),o=n.n(c),s=(n(15),n(1)),l=(n(16),n(2)),u=(n(17),n(18),n(3)),d=n(4);function m(e,t){var n=Object(s.a)(e,2),r=n[0],i=n[1];switch(t){case a.Across:return[r,i+1];case a.Down:return[r+1,i]}}!function(e){e[e.Across=0]="Across",e[e.Down=1]="Down"}(a||(a={}));var v,h;!function(e){e[e.None=0]="None",e[e.Valid=1]="Valid",e[e.Invalid=2]="Invalid"}(v||(v={})),function(e){e[e.Hit=0]="Hit",e[e.Miss=1]="Miss"}(h||(h={}));var f=function(){function e(){Object(u.a)(this,e),this.grid=void 0,this.grid=[];for(var t=0;t<10;++t){for(var n=[],a=0;a<10;++a)n.push(new p);this.grid.push(n)}}return Object(d.a)(e,[{key:"clearHover",value:function(){var e,t=Object(l.a)(this.grid);try{for(t.s();!(e=t.n()).done;){var n,a=e.value,r=Object(l.a)(a);try{for(r.s();!(n=r.n()).done;){n.value.hover=v.None}}catch(i){r.e(i)}finally{r.f()}}}catch(i){t.e(i)}finally{t.f()}}},{key:"isValidPlacement",value:function(e,t,n){for(var a=Object(s.a)(e,2),r=a[0],i=a[1],c=t.size(),o=[],l=!0,u=0;u<c;++u){if(r>=10||i>=10)return[!1,o];o.push([r,i]),this.grid[r][i].ship&&(l=!1);var d=m([r,i],n),v=Object(s.a)(d,2);r=v[0],i=v[1]}return[l,o]}},{key:"handlePlacementHover",value:function(e,t,n,a){var r,i=this.isValidPlacement(e,n,a),c=Object(s.a)(i,2),o=c[0],u=c[1],d=o?v.Valid:v.Invalid,m=Object(l.a)(u);try{for(m.s();!(r=m.n()).done;){var h=Object(s.a)(r.value,2),f=h[0],p=h[1];this.grid[f][p].hover=t?d:v.None}}catch(b){m.e(b)}finally{m.f()}}},{key:"placeShip",value:function(e,t,n){var a=this.isValidPlacement(e,t,n),r=Object(s.a)(a,2),i=r[0],c=r[1];if(!i)return!1;var o,u=Object(l.a)(c);try{for(u.s();!(o=u.n()).done;){var d=Object(s.a)(o.value,2),m=d[0],v=d[1];this.grid[m][v].ship=t}}catch(h){u.e(h)}finally{u.f()}return t.dir=n,t.pos=e,!0}}],[{key:"randomize",value:function(t){var n,r=new e,i=Object(l.a)(t.ships);try{for(i.s();!(n=i.n()).done;)for(var c=n.value;!c.pos;){var o=Math.floor(10*Math.random()),s=Math.floor(10*Math.random()),u=Math.random()<.5?a.Across:a.Down,d=[o,s];r.isValidPlacement(d,c,u)&&r.placeShip(d,c,u)}}catch(m){i.e(m)}finally{i.f()}return r}}]),e}(),p=function e(){Object(u.a)(this,e),this.hover=void 0,this.ship=void 0,this.attempt=void 0,this.hover=v.None,this.ship=null,this.attempt=!1};function b(e){var t,n=e.grid,a=e.onMouseEnter,r=e.onMouseLeave,c=e.onClick,o=e.hideFleet,s=[],u=Object(l.a)(" ABCDEFGHIJ");try{for(u.s();!(t=u.n()).done;){var d=t.value;s.push(i.a.createElement("div",{className:"GridElement CellLabel",key:d},i.a.createElement("div",{className:"content"},d)))}}catch(p){u.e(p)}finally{u.f()}for(var m=0,h=function(e){s.push(i.a.createElement("div",{className:"GridElement CellLabel",key:-1*e},i.a.createElement("div",{className:"content"},e+1)));for(var t=function(t){var l=["Cell"];switch(n.grid[e][t].hover){case v.None:l.push("HoverNone");break;case v.Valid:l.push("HoverValid");break;case v.Invalid:l.push("HoverInvalid")}var u=n.grid[e][t],d=u.ship;d&&!o&&l.push(d.kind.className);var h=i.a.createElement("div",{className:"Attempt ".concat(u.attempt?u.ship?"AttemptHit":"AttemptMiss":"")});s.push(i.a.createElement("div",{key:++m,className:l.join(" ")+" GridElement",onMouseOver:function(){return null===a||void 0===a?void 0:a(e,t)},onMouseOut:function(){return null===r||void 0===r?void 0:r(e,t)},onClick:function(){return null===c||void 0===c?void 0:c(e,t)}},h))},l=0;l<10;++l)t(l)},f=0;f<10;++f)h(f);return i.a.createElement("div",{className:"GridContainer"},i.a.createElement("div",{className:"Grid"},s))}n(19);function O(e){var t=e.selected,n=e.ship,a=e.onClick,r=e.dimIfPlaced,c=e.dimOnSunk,o=n.kind.size,s=["Ship"];s.push(t?"ShipSelected":"ShipUnselected"),r&&n.pos&&s.push("ShipDimmed"),c&&n.isSunk(c)&&s.push("ShipSunk");for(var l=[],u=0;u<o;++u)l.push(i.a.createElement("div",{key:u,className:"GridElement ".concat(n.kind.className)}));return i.a.createElement("div",{className:s.join(" "),onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return null===a||void 0===a?void 0:a(!t,n)}))},l)}var j={destroyer:{name:"Destroyer",className:"Destroyer",size:2},submarine:{name:"Submarine",className:"Submarine",size:3},cruiser:{name:"Cruiser",className:"Cruiser",size:3},battleship:{name:"Battleship",className:"Battleship",size:4},carrier:{name:"Aircraft Carrier",className:"Carrier",size:5}},E=function(){function e(t){return Object(u.a)(this,e),this.kind=void 0,this.pos=void 0,this.dir=void 0,this.kind=j[t],this.pos=null,this.dir=a.Across,this}return Object(d.a)(e,[{key:"size",value:function(){return this.kind.size}},{key:"isSunk",value:function(e){if(!this.pos)return!1;for(var t=Object(s.a)(this.pos,2),n=t[0],a=t[1],r=0;r<this.size();++r){if(!e.grid[n][a].attempt)return!1;var i=m([n,a],this.dir),c=Object(s.a)(i,2);n=c[0],a=c[1]}return!0}}]),e}(),k=function e(){return Object(u.a)(this,e),this.ships=void 0,this.ships=[new E("destroyer"),new E("submarine"),new E("cruiser"),new E("battleship"),new E("carrier")],this};function y(e){var t=e.onSetup,n=Object(r.useState)(0),c=Object(s.a)(n,2),o=c[0],l=c[1],u=Object(r.useState)((function(){return new k})),d=Object(s.a)(u,2),m=d[0],v=d[1],h=Object(r.useState)((function(){return new f})),p=Object(s.a)(h,2),O=p[0],j=p[1],E=Object(r.useState)(null),y=Object(s.a)(E,2),S=y[0],N=y[1],w=Object(r.useState)(a.Across),C=Object(s.a)(w,2),M=C[0],P=C[1],G=Object(r.useState)(null),H=Object(s.a)(G,2),z=H[0],A=H[1],I=function(e,t,n){z&&(N(n?[e,t]:null),O.handlePlacementHover([e,t],n,z,M),l(1-o))},D=function(){t(O,m)};return i.a.createElement("div",null,i.a.createElement("h2",null,"Ship Placement"),i.a.createElement("p",null,"Click on a ship to select it, then put it on the grid. Press ",i.a.createElement("code",null,"r")," to rotate."),i.a.createElement("p",null,'Or, just click the "Randomize" button!'),i.a.createElement("div",{className:"SetupContainer"},i.a.createElement("div",{className:"SetupGrid"},i.a.createElement(b,{fleet:m,grid:O,onMouseEnter:function(e,t){return I(e,t,!0)},onMouseLeave:function(e,t){return I(e,t,!1)},onClick:function(e,t){return n=[e,t],void(z&&O.placeShip(n,z,M)&&A(null));var n}})),i.a.createElement(g,{fleet:m,onClick:function(e,t){t.pos||A(e?t:null)},activeShip:z,onKeyPress:function(e){if("r"===e.key){O.clearHover();var t=M===a.Across?a.Down:a.Across;S&&z&&O.handlePlacementHover(S,!0,z,t),P(t)}e.preventDefault(),e.stopPropagation()}})),i.a.createElement("div",{className:"SetupButtons"},i.a.createElement("div",null,i.a.createElement("button",{className:"btn",onClick:function(){j(new f),v(new k)}},"Reset"),i.a.createElement("button",{className:"btn",onClick:function(){var e=new k;v(e),j(f.randomize(e))}},"Randomize")),i.a.createElement("div",null,m.ships.every((function(e){return e.pos}))?i.a.createElement("button",{className:"btn",onClick:D},"Play!"):null)))}function g(e){var t,n=[],a=Object(l.a)(e.fleet.ships);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push(i.a.createElement(O,{selected:r===e.activeShip,key:r.kind.name,ship:r,onClick:e.onClick,dimIfPlaced:!0}))}}catch(c){a.e(c)}finally{a.f()}return i.a.createElement("div",{className:"SetupFleet",onKeyPress:function(t){return e.onKeyPress(t)},tabIndex:-1},n)}n(20);var S=n(7),N=n(6),w=function e(t,n){Object(u.a)(this,e),this.grid=void 0,this.fleet=void 0,this.grid=t,this.fleet=n},C=function(e){Object(S.a)(n,e);var t=Object(N.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return n}(w),M=function(e){Object(S.a)(n,e);var t=Object(N.a)(n);function n(){Object(u.a)(this,n);var e=new k,a=f.randomize(e);return t.call(this,a,e)}return Object(d.a)(n,[{key:"makeMove",value:function(e){for(;;){var t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());if(!e.grid[t][n].attempt)return e.grid[t][n].attempt=!0,[t,n]}}}]),n}(w);function P(e){var t=e.grid,n=e.fleet,a=e.onComplete,c=Object(r.useState)(0),o=Object(s.a)(c,2),l=o[0],u=o[1],d=Object(r.useState)((function(){return new M})),m=Object(s.a)(d,1)[0],h=Object(r.useState)((function(){return new C(t,n)})),f=Object(s.a)(h,1)[0],p=Object(r.useState)(f),O=Object(s.a)(p,2),j=O[0],E=O[1],k=Object(r.useState)(null),y=Object(s.a)(k,2),g=y[0],S=y[1],N=function(e){return f.fleet.ships.every((function(e){return e.isSunk(f.grid)}))?(S(m),void E(null)):m.fleet.ships.every((function(e){return e.isSunk(m.grid)}))?(S(f),void E(null)):void E(e)},w=function(e,t,n){var a=Object(s.a)(t,2),r=a[0],i=a[1];j===f&&(n&&!e.grid[r][i].attempt?e.grid[r][i].hover=v.Valid:e.grid[r][i].hover=v.None,u(1-l))};return i.a.createElement("div",{className:"Game"},i.a.createElement("h2",null,g?g===f?"You win!":"Computer wins":j===f?"Your turn":j===m?"Computer is thinking...":void 0),i.a.createElement("div",{className:"GameContainer"},i.a.createElement("div",{className:"GamePlayer GameHuman"},i.a.createElement("h3",{className:"GamePlayerHeader"},"You"),i.a.createElement(G,{fleet:f.fleet,grid:f.grid}),i.a.createElement(b,{fleet:f.fleet,grid:f.grid})),i.a.createElement("div",{className:"GamePlayer GameComputer"},i.a.createElement("h3",{className:"GamePlayerHeader"},"Computer"),i.a.createElement(b,{fleet:m.fleet,grid:m.grid,onMouseEnter:function(e,t){return w(m.grid,[e,t],!0)},onMouseLeave:function(e,t){return w(m.grid,[e,t],!1)},onClick:function(e,t){return function(e,t){var n=Object(s.a)(t,2),a=n[0],r=n[1];if(j===f){var i=e.grid[a][r];i.attempt||(i.attempt=!0,i.hover=v.None,N(m),setTimeout((function(){m.makeMove(f.grid),N(f)}),100))}}(m.grid,[e,t])},hideFleet:!g}),i.a.createElement(G,{fleet:m.fleet,grid:m.grid}))),i.a.createElement("div",{className:"GameButtons"},i.a.createElement("button",{className:"btn",onClick:a},"Reset")))}function G(e){var t,n=[],a=Object(l.a)(e.fleet.ships);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push(i.a.createElement(O,{selected:!1,key:r.kind.name,ship:r,dimOnSunk:e.grid}))}}catch(c){a.e(c)}finally{a.f()}return i.a.createElement("div",{className:"GameFleet"},n)}function H(){var e,t=Object(r.useState)(null),n=Object(s.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(null),l=Object(s.a)(o,2),u=l[0],d=l[1];return e=a&&u?i.a.createElement(P,{grid:a,fleet:u,onComplete:function(){c(null),d(null)}}):i.a.createElement(y,{onSetup:function(e,t){c(e),d(t)}}),i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"SHIPS IN A GRID"),e)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.5d027731.chunk.js.map